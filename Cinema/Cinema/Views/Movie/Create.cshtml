@model Cinema.Models.Movie

@{
    ViewData["Title"] = "Filmes";
}

<div class="text-center">
    <h1>Adicionar Filme</h1>
    <hr />
</div>

<div class="container">

    <div class="mx-auto">
        <form asp-action="Create" method="post">
            @Html.AntiForgeryToken()
            <div asp-validation-summary="ModelOnly"
                 class="text-danger"></div>

            <div class="form-group">
                <label class="control-label">Endereço URL da capa:</label>
                <input asp-for="ImageURL" class="form-control" />
                <span asp-validation-for="ImageURL" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label class="control-label">Título</label>
                <input asp-for="Title"
                       class="form-control" />
                <span asp-validation-for="Title"
                      class="text-danger"></span>
            </div>

            <div class="form-group">
                <label class="control-label">Indicação de Idade:</label>
                <!-- usar a propriedade escalar (ID) -->
                <select asp-for="AgeRatingID" asp-items="ViewBag.AgeRating" class="form-control">
                    <option value="">-- Selecionar --</option>
                </select>
                <span asp-validation-for="AgeRatingID" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label class="control-label">Gêneros:</label>
                <div class="d-flex flex-wrap align-items-center">
                    @{
                        var genres = ViewBag.Genres as IEnumerable<Microsoft.AspNetCore.Mvc.Rendering.SelectListItem>
                                     ?? Enumerable.Empty<Microsoft.AspNetCore.Mvc.Rendering.SelectListItem>();
                    }
                    @foreach (var g in genres)
                    {
                        <div class="form-check me-3 mb-2">
                            <!-- nome para binding: SelectedGenreIds no POST -->
                            <input class="form-check-input" type="checkbox" name="SelectedGenreIds" value="@g.Value" id="genre_@g.Value" />
                            <label class="form-check-label" for="genre_@g.Value">@g.Text</label>
                        </div>
                    }
                </div>
                <!-- validação customizada (ajuste no servidor conforme necessário) -->
                <span class="text-danger"></span>
            </div>

            <div class="form-group">
                <label class="control-label">Atores:</label>
                <div class="d-flex flex-wrap align-items-center">
                    @{
                        var actors = ViewBag.Actors as IEnumerable<Microsoft.AspNetCore.Mvc.Rendering.SelectListItem>
                                     ?? Enumerable.Empty<Microsoft.AspNetCore.Mvc.Rendering.SelectListItem>();
                    }
                    @foreach (var a in actors)
                    {
                        <div class="form-check me-3 mb-2">
                            <input class="form-check-input" type="checkbox" name="SelectedActorIds" value="@a.Value" id="actor_@a.Value" />
                            <label class="form-check-label" for="actor_@a.Value">@a.Text</label>
                        </div>
                    }
                </div>
                <span asp-validation-for="Actors" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label class="control-label">Diretores:</label>
                <div class="d-flex flex-wrap align-items-center">
                    @{
                        var directors = ViewBag.Directors as IEnumerable<Microsoft.AspNetCore.Mvc.Rendering.SelectListItem>
                                        ?? Enumerable.Empty<Microsoft.AspNetCore.Mvc.Rendering.SelectListItem>();
                    }
                    @foreach (var d in directors)
                    {
                        <div class="form-check me-3 mb-2">
                            <input class="form-check-input" type="checkbox" name="SelectedDirectorIds" value="@d.Value" id="director_@d.Value" />
                            <label class="form-check-label" for="director_@d.Value">@d.Text</label>
                        </div>
                    }
                </div>
                <span asp-validation-for="Directors" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label class="control-label">Duração do Filme (minutos):</label>
                <input asp-for="DurationInMinutes"
                       class="form-control" />
                <span asp-validation-for="DurationInMinutes"
                      class="number"></span>
            </div>

            <br />

            <div class="form-group">
                <input type="submit" value="Salvar"
                       class="btn btn-warning btn-lg" />
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        $(function () {
            $('.selectpicker').selectpicker();
        });
    </script>
}
